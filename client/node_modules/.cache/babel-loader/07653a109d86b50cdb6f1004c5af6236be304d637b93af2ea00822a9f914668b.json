{"ast":null,"code":"//recordList.js\nimport React,{useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import{NavLink}from\"react-router-dom\";import Navbar from'./navbar';import{useNavigate}from'react-router-dom';// Import useNavigate hook for navigation\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Record=props=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:props.record.name}),/*#__PURE__*/_jsx(\"td\",{children:props.record.position}),/*#__PURE__*/_jsx(\"td\",{children:props.record.level}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Link,{className:\"btn btn-link\",to:\"/edit/\".concat(props.record._id),children:\"Editar\"}),\" |\",/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-link\",onClick:()=>props.deleteRecord(props.record._id),children:\"Borrar\"})]})]});export default function RecordList(){const[records,setRecords]=useState([]);const[error,setError]=useState(null);const[searchQuery,setSearchQuery]=useState(\"\");const navigate=useNavigate();// Initialize useNavigate hook for navigation\nuseEffect(()=>{async function getRecords(){try{const response=await fetch(\"http://localhost:5050/record/\");console.log('Response:',response);if(!response.ok){throw new Error(\"An error occurred: \".concat(response.statusText));}const records=await response.json();console.log('Records:',records);setRecords(records);}catch(error){console.error('Fetch error:',error);setError(error.message);}}getRecords();},[]);async function deleteRecord(id){try{await fetch(\"http://localhost:5050/record/\".concat(id),{method:\"DELETE\"});const newRecords=records.filter(el=>el._id!==id);setRecords(newRecords);}catch(error){setError(error.message);}}function recordList(){return records.filter(record=>{const nameMatch=record.name.toLowerCase().includes(searchQuery.toLowerCase());const positionMatch=record.position.toLowerCase().includes(searchQuery.toLowerCase());const levelMatch=record.level.toLowerCase().includes(searchQuery.toLowerCase());return nameMatch||positionMatch||levelMatch;}).map(record=>/*#__PURE__*/_jsx(Record,{record:record,deleteRecord:()=>deleteRecord(record._id)},record._id));}// Define logout function\nconst logout=()=>{// Perform logout logic, such as clearing user authentication data\nlocalStorage.clear();// Navigate the user to the login page\nnavigate(\"/\");// You may need to adjust the path according to your routes\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"tablex\",style:{margin:\"20px\"},children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-evenly align-items-center mb-3\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Employee List\"}),/*#__PURE__*/_jsx(NavLink,{className:\"nav-link btn btn-primary\",to:\"/create\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",children:\"Create Registry\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:logout,children:\"Logout\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",style:{maxWidth:'300px'},children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Buscar...\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value)})}),error?/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error]}):/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped\",style:{marginTop:20},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Position\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Departament\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:recordList()})]})]});}","map":{"version":3,"names":["React","useEffect","useState","Link","NavLink","Navbar","useNavigate","jsx","_jsx","jsxs","_jsxs","Record","props","children","record","name","position","level","className","to","concat","_id","onClick","deleteRecord","RecordList","records","setRecords","error","setError","searchQuery","setSearchQuery","navigate","getRecords","response","fetch","console","log","ok","Error","statusText","json","message","id","method","newRecords","filter","el","recordList","nameMatch","toLowerCase","includes","positionMatch","levelMatch","map","logout","localStorage","clear","style","margin","maxWidth","type","placeholder","value","onChange","e","target","marginTop"],"sources":["C:/Users/wasab/management-software/client/src/components/recordList.js"],"sourcesContent":["//recordList.js\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport Navbar from './navbar';\r\nimport { useNavigate } from 'react-router-dom'; // Import useNavigate hook for navigation\r\n\r\nconst Record = (props) => (\r\n  <tr>\r\n    <td>{props.record.name}</td>\r\n    <td>{props.record.position}</td>\r\n    <td>{props.record.level}</td>\r\n    \r\n    <td>\r\n      <Link className=\"btn btn-link\" to={`/edit/${props.record._id}`}>Editar</Link> |\r\n      <button className=\"btn btn-link\" onClick={() => props.deleteRecord(props.record._id)}>\r\n        Borrar\r\n      </button>\r\n    </td>\r\n  </tr>\r\n);\r\n\r\nexport default function RecordList() {\r\n  const [records, setRecords] = useState([]);\r\n  const [error, setError] = useState(null);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const navigate = useNavigate(); // Initialize useNavigate hook for navigation\r\n\r\n  useEffect(() => {\r\n    async function getRecords() {\r\n      try {\r\n        const response = await fetch(`http://localhost:5050/record/`);\r\n        console.log('Response:', response);\r\n        if (!response.ok) {\r\n          throw new Error(`An error occurred: ${response.statusText}`);\r\n        }\r\n        const records = await response.json();\r\n        console.log('Records:', records);\r\n        setRecords(records);\r\n      } catch (error) {\r\n        console.error('Fetch error:', error);\r\n        setError(error.message);\r\n      }\r\n    }\r\n  \r\n    getRecords();\r\n  }, []);\r\n  \r\n  async function deleteRecord(id) {\r\n    try {\r\n      await fetch(`http://localhost:5050/record/${id}`, {\r\n        method: \"DELETE\"\r\n      });\r\n      const newRecords = records.filter((el) => el._id !== id);\r\n      setRecords(newRecords);\r\n    } catch (error) {\r\n      setError(error.message);\r\n    }\r\n  }\r\n\r\n  function recordList() {\r\n    return records\r\n      .filter((record) => {\r\n        const nameMatch = record.name.toLowerCase().includes(searchQuery.toLowerCase());\r\n        const positionMatch = record.position.toLowerCase().includes(searchQuery.toLowerCase());\r\n        const levelMatch = record.level.toLowerCase().includes(searchQuery.toLowerCase());\r\n        return nameMatch || positionMatch || levelMatch;\r\n      })\r\n      .map((record) => (\r\n        <Record\r\n          record={record}\r\n          deleteRecord={() => deleteRecord(record._id)}\r\n          key={record._id}\r\n        />\r\n      ));\r\n  }\r\n\r\n  // Define logout function\r\n  const logout = () => {\r\n    // Perform logout logic, such as clearing user authentication data\r\n    localStorage.clear();\r\n    // Navigate the user to the login page\r\n    navigate(\"/\"); // You may need to adjust the path according to your routes\r\n  };\r\n\r\n  return (\r\n    \r\n    \r\n    <div className=\"tablex\" style={{ margin: \"20px\" }}>\r\n        <Navbar />\r\n      <div className=\"d-flex justify-content-evenly align-items-center mb-3\">\r\n        <h3>Employee List</h3>\r\n        <NavLink className=\"nav-link btn btn-primary\" to=\"/create\">\r\n        <button className=\"btn btn-success\" >Create Registry</button>\r\n        </NavLink>\r\n        {/* Add logout button */}\r\n        <button className=\"btn btn-primary\" onClick={logout}>Logout</button>\r\n      </div>\r\n      <div className=\"mb-3\" style={{ maxWidth: '300px' }}>\r\n      <input\r\n        type=\"text\"\r\n        className=\"form-control\"\r\n        placeholder=\"Buscar...\"\r\n        value={searchQuery}\r\n        onChange={(e) => setSearchQuery(e.target.value)}\r\n      />\r\n    </div>\r\n\r\n      {error ? (\r\n        <div>Error: {error}</div>\r\n      ) : (\r\n        <table className=\"table table-striped\" style={{ marginTop: 20 }}>\r\n          <thead>\r\n            <tr>\r\n              <th>Name</th>\r\n              <th>Position</th>\r\n              <th>Departament</th>\r\n              <th>Action</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>{recordList()}</tbody>\r\n        </table>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}